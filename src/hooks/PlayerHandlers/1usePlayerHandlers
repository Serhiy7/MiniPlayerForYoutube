Описание
Этот код определяет пользовательский хук usePlayerHandlers, который предоставляет обработчики событий для управления аудио или видео плеером с использованием библиотеки ReactPlayer. Хук использует RxJS для обработки событий прогресса воспроизведения с дебаунсингом, чтобы избежать слишком частых обновлений состояния.

Параметры
Хук принимает объект параметров типа UsePlayerHandlersParams, который включает:

playerRef: Ссылка на экземпляр ReactPlayer.
setDuration: Функция для установки длительности медиа.
setProgress: Функция для установки текущей позиции воспроизведения.
setIsPlaying: Функция для установки состояния воспроизведения.
initAnalyser: Функция для инициализации аудиоанализатора.
initialProgress: Начальная позиция воспроизведения.
initialVolume: Начальный уровень громкости.
autoPlayInitial: Флаг, указывающий, должно ли воспроизведение начинаться автоматически.
Логика работы
Создание Subject для прогресса:

Используется Subject из RxJS для управления событиями прогресса воспроизведения. Это позволяет использовать оператор debounceTime для уменьшения количества обновлений состояния.
Эффект для подписки на Subject:

Используется хук useEffect для подписки на события прогресса. При каждом событии прогресса, состояние обновляется с задержкой в 200 мс, чтобы избежать слишком частых обновлений.
Обработчик события onReady:

Этот обработчик вызывается, когда плеер готов к воспроизведению. Он устанавливает начальную громкость, позицию воспроизведения и длительность медиа. Если autoPlayInitial установлен в true, начинается воспроизведение.
Обработчик события onProgress:

Этот обработчик вызывается при изменении позиции воспроизведения. Он отправляет текущую позицию в progressSubject.
Обработчик события onEnded:

Этот обработчик вызывается, когда воспроизведение завершено. Он устанавливает состояние воспроизведения в false.
Возвращаемые значения
Хук возвращает объект с обработчиками событий:

onReady: Обработчик события готовности плеера.
onProgress: Обработчик события прогресса воспроизведения.
onEnded: Обработчик события завершения воспроизведения.